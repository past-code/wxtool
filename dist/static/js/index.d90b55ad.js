(()=>{"use strict";var e={6728:function(e,t,r){var s=r(2676),l=r(5271),n=r(8751),a=r(4416),i=r(833),o=r(5618),u=r(9116);u.Z.defaults.withCredentials=!1;let d=u.Z.create({timeout:12e4,headers:{"Content-Type":"application/json"}});d.interceptors.response.use(e=>{var t;return(null==(t=e.request)?void 0:t.requestURL.startsWith("https://api.weixin.qq.com"))?Promise.resolve(e.data||e):0!=e.data.status?(o.ZP.error(e.data.info||e.data.message),Promise.reject(e.data)):Promise.resolve(e.data||e)},e=>Promise.reject(e));let c=new class{request(e){return d.request(e)}get(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request({url:e,params:{...t,stamp:Date.now()},...r})}post(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request({method:"post",url:e,data:t,...r})}put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request({method:"put",url:e,data:t,...r})}del(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({method:"delete",url:e,params:{...t}})}blobGet(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request({url:e,params:{...t,stamp:Date.now()},responseType:"blob",...r})}constructor(e={}){(0,i._)(this,"options",void 0),this.options=e}};c.request.bind(c);let p=c.get.bind(c);c.post.bind(c),c.put.bind(c),c.del.bind(c);let h=c.blobGet.bind(c),v=e=>p("https://luffy.gaodunwangxiao.com/api/v1/wechatDev/accessToken",e),m=e=>p("https://apigateway.gaodun.com/luffy/api/v1/wechat/lists",e),f=e=>p("https://api.weixin.qq.com/wxa/get_latest_auditstatus",e),x=e=>h("https://api.weixin.qq.com/wxa/get_qrcode",e),j=e=>p("https://api.weixin.qq.com/wxa/undocodeaudit",e);var g=r(4352),b=r(3560),w=r(1416),y=r(5290),S=r(8003);let _=[{label:"获取最后一次提审信息",value:"info"},{label:"获取体验二维码",value:"qrcode"},{label:"撤回审核",value:"revoke"}],O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",r=new Date(e),s={YYYY:r.getFullYear(),MM:String(r.getMonth()+1).padStart(2,"0"),DD:String(r.getDate()).padStart(2,"0"),HH:String(r.getHours()).padStart(2,"0"),mm:String(r.getMinutes()).padStart(2,"0"),ss:String(r.getSeconds()).padStart(2,"0")};return t.replace(/YYYY|MM|DD|HH|mm|ss/g,e=>null==s?void 0:s[e])},q=()=>{let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(""),[a,i]=(0,l.useState)(),[u]=g.Z.useForm(),d=g.Z.useWatch("appid",u),c=g.Z.useWatch("use",u);(0,l.useEffect)(()=>{p()},[]);let p=async()=>{let e=await m({type:"SCRM_APP",page:1});if((null==e?void 0:e.status)===0){var r;t((null==e||null==(r=e.result)?void 0:r.list)||[])}},h=async()=>{let{appid:e,use:t}=await u.validateFields(),s=r;if(!(null==s?void 0:s.length)){let t=await v({appid:e});if((null==t?void 0:t.status)===0){var l,a;n((null==t||null==(l=t.result)?void 0:l.accessToken)||""),s=(null==t||null==(a=t.result)?void 0:a.accessToken)||""}else o.ZP.error("请刷新")}if("info"===t){let e=await f({access_token:s});(null==e?void 0:e.errcode)===0&&i(e)}if("qrcode"===t){let e=await x({access_token:s});i(URL.createObjectURL(e))}if("revoke"===t){let e=await j({access_token:s});(null==e?void 0:e.errcode)===0&&(o.ZP.success("撤回成功~"),i("撤回成功"))}};return(0,s.jsxs)("div",{className:"index-wrap",children:[(0,s.jsxs)(g.Z,{form:u,labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},autoComplete:"off",children:[(0,s.jsx)(g.Z.Item,{name:"appid",label:"小程序",rules:[{required:!0,message:"请选择小程序"}],extra:(0,s.jsx)("div",{children:d?`appid：${d}`:null}),children:(0,s.jsx)(b.Z,{placeholder:"请选择小程序",filterOption:(e,t)=>{var r,s;return null==t||null==(s=t.children)||null==(r=s.toLowerCase())?void 0:r.includes(null==e?void 0:e.toLowerCase())},getPopupContainer:e=>null==e?void 0:e.parentElement,showSearch:!0,allowClear:!0,onChange:()=>{n(""),i(void 0)},children:e.map(e=>(0,s.jsx)(b.Z.Option,{value:e.wechatAppId,children:e.wechatAppName},e.wechatAppId))})}),(0,s.jsx)(g.Z.Item,{name:"use",label:"功能",rules:[{required:!0,message:"请选择功能"}],children:(0,s.jsx)(b.Z,{placeholder:"请选择功能",showSearch:!0,allowClear:!0,onChange:()=>{i(void 0)},children:_.map(e=>(0,s.jsx)(b.Z.Option,{value:e.value,children:e.label},e.value))})}),(0,s.jsx)(g.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.use!==t.use,children:e=>{let{getFieldValue:t}=e;return"revoke"===t("use")?(0,s.jsx)(g.Z.Item,{label:null,children:(0,s.jsx)(w.Z,{title:"撤回审核",description:"确认撤回审核吗",okText:"是的",cancelText:"不撤回，我点错了",onConfirm:h,children:(0,s.jsx)(y.ZP,{danger:!0,children:"撤回"})})}):(0,s.jsx)(g.Z.Item,{label:null,children:(0,s.jsx)(y.ZP,{type:"primary",onClick:h,children:"提交"})})}})]}),(0,s.jsx)(s.Fragment,{children:a&&(0,s.jsxs)(S.Z,{title:"结果",style:{width:800},children:["info"===c&&a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["最新的审核 ID: ",a.auditid]}),0===a.status&&(0,s.jsx)("p",{children:"审核状态: 审核成功"}),1===a.status&&(0,s.jsx)("p",{children:"审核状态: 审核被拒绝"}),2===a.status&&(0,s.jsx)("p",{children:"审核状态: 审核中"}),3===a.status&&(0,s.jsx)("p",{children:"审核状态: 已撤回"}),4===a.status&&(0,s.jsx)("p",{children:"审核状态: 审核延后"}),a.reason&&(0,s.jsxs)("p",{children:["拒绝原因: ",a.reason]}),a.ScreenShot&&(0,s.jsxs)("p",{children:["截图示例: ",a.ScreenShot]}),a.user_desc&&(0,s.jsxs)("p",{children:["版本描述: ",a.user_desc]}),a.user_version&&(0,s.jsxs)("p",{children:["审核版本: ",a.user_version]}),a.submit_audit_time&&(0,s.jsxs)("p",{children:["提交审核的时间: ",O(a.submit_audit_time)]})]}),"qrcode"===c&&(0,s.jsx)("img",{src:a}),"revoke"===c&&(0,s.jsx)("p",{color:"red",children:a})]})})]})};var Z=r(1790);let P=()=>{let e=(0,a.s0)();return(0,s.jsx)(Z.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,s.jsx)(y.ZP,{type:"primary",onClick:()=>{e("/")},children:"Back Home"})})};function k(){return(0,a.V$)([{path:"/",element:(0,s.jsx)(q,{})},{path:"*",element:(0,s.jsx)(P,{})}])}let C=document.getElementById("root");C&&n.createRoot(C).render((0,s.jsx)(l.StrictMode,{children:(0,s.jsx)(()=>(0,s.jsx)(a.VK,{children:(0,s.jsx)(k,{})}),{})}))}},t={};function r(s){var l=t[s];if(void 0!==l)return l.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(s,l){if(1&l&&(s=this(s)),8&l||"object"==typeof s&&s&&(4&l&&s.__esModule||16&l&&"function"==typeof s.then))return s;var n=Object.create(null);r.r(n);var a={};e=e||[null,t({}),t([]),t(t)];for(var i=2&l&&s;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{a[e]=()=>s[e]});return a.default=()=>s,r.d(n,a),n}})(),r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];r.O=(t,s,l,n)=>{if(s){n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[s,l,n];return}for(var i=1/0,a=0;a<e.length;a++){for(var[s,l,n]=e[a],o=!0,u=0;u<s.length;u++)(!1&n||i>=n)&&Object.keys(r.O).every(e=>r.O[e](s[u]))?s.splice(u--,1):(o=!1,n<i&&(i=n));if(o){e.splice(a--,1);var d=l();void 0!==d&&(t=d)}}return t}})(),r.rv=()=>"1.3.5",(()=>{var e={980:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var l,n,[a,i,o]=s,u=0;if(a.some(t=>0!==e[t])){for(l in i)r.o(i,l)&&(r.m[l]=i[l]);if(o)var d=o(r)}for(t&&t(s);u<a.length;u++)n=a[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=self.webpackChunktool=self.webpackChunktool||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),r.ruid="bundler=rspack@1.3.5";var s=r.O(void 0,["72","361","118","885"],function(){return r(6728)});s=r.O(s)})();